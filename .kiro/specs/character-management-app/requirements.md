# 要件文書

## 概要

歴史上の人物を記録・管理したり、知り合いの人間関係を可視化するためのアプリケーション。ユーザーはグループを作成し、グループ内で人物の詳細情報を管理し、人物間の関係を視覚的に表現できる。

## 要件

### 要件 1: グループ管理

**ユーザーストーリー:** ユーザーとして、人物を整理するためのグループを作成・管理したい。そうすることで、異なるカテゴリーの人物を分けて管理できる。

#### 受入基準

1. WHEN ユーザーがグループ作成を選択 THEN システムはグループ名入力フォームを表示する
2. WHEN ユーザーがグループ名を入力して保存 THEN システムは新しいグループを作成し、グループ一覧に表示する
3. WHEN ユーザーがグループを選択 THEN システムはそのグループの詳細画面を表示する
4. WHEN ユーザーがグループを削除 THEN システムは確認ダイアログを表示し、確認後にグループと関連データを削除する

### 要件 2: 人物情報管理

**ユーザーストーリー:** ユーザーとして、グループ内に人物の詳細情報を登録・管理したい。そうすることで、各人物の情報を体系的に保存できる。

#### 受入基準

1. WHEN ユーザーがグループ内で人物追加を選択 THEN システムは人物情報入力フォームを表示する
2. WHEN ユーザーが人物の名前、写真、情報、関連リンクを入力して保存 THEN システムは人物をグループに追加する
3. WHEN ユーザーが人物情報を編集 THEN システムは編集フォームを表示し、変更を保存する
4. WHEN ユーザーが人物を削除 THEN システムは確認後に人物と関連する関係データを削除する
5. IF 写真がアップロードされた場合 THEN システムは画像を適切なサイズに調整して保存する

### 要件 3: ラベル機能

**ユーザーストーリー:** ユーザーとして、人物にラベルを付けて分類したい。そうすることで、人物の特徴や役割を視覚的に識別できる。

#### 受入基準

1. WHEN ユーザーが人物にラベルを追加 THEN システムはラベル選択・作成インターフェースを表示する
2. WHEN ユーザーが新しいラベルを作成 THEN システムはラベル名と色を設定できるフォームを表示する
3. WHEN 人物に5つのラベルが既に付いている場合 THEN システムは追加のラベル付与を制限する
4. WHEN ユーザーがラベルを削除 THEN システムは該当ラベルを人物から除去する
5. WHEN ラベルが表示される場合 THEN システムは色付きのバッジとして表示する

### 要件 4: 人物間関係管理

**ユーザーストーリー:** ユーザーとして、同一グループ内の人物同士の関係を定義したい。そうすることで、人間関係を構造化して理解できる。

#### 受入基準

1. WHEN ユーザーが2人の人物間の関係を作成 THEN システムは関係タイプ選択フォームを表示する
2. WHEN ユーザーが関係タイプを選択して保存 THEN システムは双方向の関係を作成する
3. WHEN ユーザーが関係を編集 THEN システムは関係タイプの変更を許可する
4. WHEN ユーザーが関係を削除 THEN システムは確認後に関係データを削除する
5. IF 異なるグループの人物間で関係を作成しようとした場合 THEN システムはエラーメッセージを表示する

### 要件 5: 関係図の視覚化

**ユーザーストーリー:** ユーザーとして、グループ内の人物関係を視覚的な図として表示したい。そうすることで、複雑な人間関係を直感的に理解できる。

#### 受入基準

1. WHEN ユーザーが関係図表示を選択 THEN システムはグループ内の全人物と関係をグラフ形式で表示する
2. WHEN 関係図が表示される場合 THEN システムは人物を円形ノードとして、関係を線として表示する
3. WHEN ユーザーが人物ノードをクリック THEN システムは人物の詳細情報をポップアップで表示する
4. WHEN ユーザーが関係線をクリック THEN システムは関係の詳細情報を表示する
5. WHEN 関係図が複雑な場合 THEN システムはズーム・パン機能を提供する

### 要件 6: データの永続化

**ユーザーストーリー:** ユーザーとして、入力したデータが保存され、アプリケーション再起動後も利用できるようにしたい。そうすることで、継続的にデータを蓄積できる。

#### 受入基準

1. WHEN ユーザーがデータを保存 THEN システムはローカルストレージまたはデータベースに永続化する
2. WHEN アプリケーションが起動 THEN システムは保存されたデータを読み込んで表示する
3. WHEN データの読み込みに失敗した場合 THEN システムはエラーメッセージを表示し、空の状態から開始する
4. WHEN 大量のデータが存在する場合 THEN システムは適切なパフォーマンスを維持する