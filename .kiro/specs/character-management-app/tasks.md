# 実装計画

- [x] 1. プロジェクト基盤の構築
  - バックエンドとフロントエンドのプロジェクト構造を作成
  - 必要な依存関係をインストール
  - 基本的な設定ファイルを作成
  - _要件: 6.1, 6.2_

- [ ] 2. データベースとモデルの実装
  - [x] 2.1 MySQLデータベース接続の設定
    - GORM設定とデータベース接続プールを実装
    - 環境変数による設定管理を追加
    - _要件: 6.1, 6.2_
  
  - [x] 2.2 データモデル構造体の実装
    - Group、Character、Label、Relationshipの構造体を定義
    - GORMタグとバリデーションタグを設定
    - _要件: 1.1, 2.1, 3.1, 4.1_
  
  - [x] 2.3 データベースマイグレーションの実装
    - 自動マイグレーション機能を実装
    - テーブル作成とインデックス設定
    - _要件: 6.1, 6.2_

- [ ] 3. バックエンドAPI基盤の実装
  - [x] 3.1 Ginサーバーとミドルウェアの設定
    - CORSミドルウェアとエラーハンドリングミドルウェアを実装
    - ルーティング設定の基盤を作成
    - _要件: 6.1, 6.2_
  
  - [x] 3.2 リポジトリパターンの実装
    - 各モデル用のリポジトリインターフェースと実装を作成
    - データベース操作の基本CRUD機能を実装
    - _要件: 1.1, 2.1, 3.1, 4.1_

- [ ] 4. グループ管理機能の実装
  - [x] 4.1 グループAPIエンドポイントの実装
    - グループのCRUD操作用のHTTPハンドラーを実装
    - バリデーションとエラーハンドリングを追加
    - _要件: 1.1, 1.2, 1.3, 1.4_
  
  - [ ] 4.2 グループAPIの単体テスト作成
    - グループサービスとハンドラーのテストを作成
    - モックを使用したテストケースを実装
    - _要件: 1.1, 1.2, 1.3, 1.4_

- [-] 5. 人物管理機能の実装
  - [x] 5.1 人物APIエンドポイントの実装
    - 人物のCRUD操作用のHTTPハンドラーを実装
    - 画像アップロード機能を含む
    - _要件: 2.1, 2.2, 2.3, 2.4, 2.5_
  
  - [x] 5.2 画像アップロード処理の実装
    - マルチパートフォームデータの処理を実装
    - 画像ファイルの保存とパス管理を追加
    - _要件: 2.5_
  
  - [ ] 5.3 人物APIの単体テスト作成
    - 人物サービスとハンドラーのテストを作成
    - 画像アップロード機能のテストを含む
    - _要件: 2.1, 2.2, 2.3, 2.4, 2.5_

- [ ] 6. ラベル管理機能の実装
  - [x] 6.1 ラベルAPIエンドポイントの実装
    - ラベルのCRUD操作用のHTTPハンドラーを実装
    - 人物とラベルの関連付け機能を追加
    - _要件: 3.1, 3.2, 3.3, 3.4, 3.5_
  
  - [x] 6.2 ラベル制限機能の実装
    - 人物あたり最大5つのラベル制限をサーバーサイドで実装
    - バリデーションエラーの適切な処理を追加
    - _要件: 3.3_
  
  - [ ] 6.3 ラベルAPIの単体テスト作成
    - ラベル管理機能のテストケースを作成
    - 制限機能のテストを含む
    - _要件: 3.1, 3.2, 3.3, 3.4, 3.5_

- [ ] 7. 関係管理機能の実装
  - [x] 7.1 関係APIエンドポイントの実装
    - 双方向関係のCRUD操作用のHTTPハンドラーを実装
    - IDの順序制御ロジックを追加
    - _要件: 4.1, 4.2, 4.3, 4.4, 4.5_
  
  - [x] 7.2 関係データの整合性チェック実装
    - 同一グループ内の人物間のみ関係作成可能な制約を実装
    - 重複関係の防止機能を追加
    - _要件: 4.5_
  
  - [ ] 7.3 関係APIの単体テスト作成
    - 関係管理機能のテストケースを作成
    - 整合性チェック機能のテストを含む
    - _要件: 4.1, 4.2, 4.3, 4.4, 4.5_

- [ ] 8. フロントエンド基盤の実装
  - [x] 8.1 Reactプロジェクトの初期設定
    - Vite + React + TypeScriptプロジェクトを作成
    - 必要なライブラリ（Zustand、Axios、Tailwind CSS）をインストール
    - _要件: 6.1, 6.2_
  
  - [x] 8.2 API通信サービスの実装
    - AxiosベースのAPIクライアントを実装
    - エラーハンドリングとレスポンス型定義を追加
    - _要件: 6.1, 6.2_
  
  - [x] 8.3 状態管理ストアの実装
    - Zustandを使用したグローバル状態管理を実装
    - 各エンティティ用のストアを作成
    - _要件: 6.1, 6.2_

- [x] 9. グループ管理UIの実装
  - [x] 9.1 グループ一覧コンポーネントの実装
    - グループ一覧表示とカード形式のUIを作成
    - グループ選択機能を追加
    - _要件: 1.1, 1.3_
  
  - [x] 9.2 グループ作成・編集フォームの実装
    - グループ作成と編集用のフォームコンポーネントを作成
    - バリデーションとエラー表示を追加
    - _要件: 1.1, 1.2_
  
  - [x] 9.3 グループ削除機能の実装
    - 削除確認ダイアログと削除処理を実装
    - 関連データの削除警告を追加
    - _要件: 1.4_

- [ ] 10. 人物管理UIの実装
  - [ ] 10.1 人物一覧コンポーネントの実装
    - グループ内の人物一覧表示を作成
    - 人物カード形式のUIを実装
    - _要件: 2.1, 2.2_
  
  - [ ] 10.2 人物作成・編集フォームの実装
    - 人物情報入力フォームを作成
    - 画像アップロード機能を含む
    - _要件: 2.1, 2.2, 2.5_
  
  - [ ] 10.3 画像アップロード・プレビュー機能の実装
    - ドラッグ&ドロップ対応の画像アップロードを実装
    - Canvas APIを使用した画像リサイズ機能を追加
    - _要件: 2.5_
  
  - [ ] 10.4 人物詳細表示の実装
    - 人物の詳細情報表示コンポーネントを作成
    - 関連リンクの表示と編集機能を追加
    - _要件: 2.2, 2.3_

- [ ] 11. ラベル管理UIの実装
  - [ ] 11.1 ラベル管理コンポーネントの実装
    - ラベル作成・編集・削除機能を実装
    - カラーピッカー機能を追加
    - _要件: 3.1, 3.2, 3.4_
  
  - [ ] 11.2 ラベル表示・選択機能の実装
    - 色付きバッジとしてのラベル表示を実装
    - 人物へのラベル付与・削除機能を追加
    - _要件: 3.1, 3.4, 3.5_
  
  - [ ] 11.3 ラベル制限UIの実装
    - 最大5つまでの制限をフロントエンドで実装
    - 制限到達時の適切なUI表示を追加
    - _要件: 3.3_

- [ ] 12. 関係管理UIの実装
  - [ ] 12.1 関係作成フォームの実装
    - 2人の人物間の関係作成フォームを実装
    - 関係タイプ選択機能を追加
    - _要件: 4.1, 4.2_
  
  - [ ] 12.2 関係一覧表示の実装
    - グループ内の関係一覧をテーブル形式で表示
    - 関係の編集・削除機能を追加
    - _要件: 4.2, 4.3, 4.4_

- [ ] 13. 関係図可視化機能の実装
  - [ ] 13.1 D3.js基盤の実装
    - D3.jsを使用したグラフ描画の基盤を作成
    - ノードとリンクの基本描画機能を実装
    - _要件: 5.1, 5.2_
  
  - [ ] 13.2 インタラクティブ機能の実装
    - ノードクリックでの詳細表示を実装
    - ズーム・パン機能を追加
    - _要件: 5.3, 5.4, 5.5_
  
  - [ ] 13.3 関係図のスタイリング実装
    - 人物ノードの画像表示とラベル色の反映
    - 関係線のスタイリングと説明表示
    - _要件: 5.2, 5.4_

- [ ] 14. 統合テストとE2Eテストの実装
  - [ ] 14.1 バックエンド統合テストの作成
    - APIエンドポイント間の連携テストを作成
    - データベースを含む統合テストを実装
    - _要件: 全要件_
  
  - [ ] 14.2 フロントエンド統合テストの作成
    - コンポーネント間の連携テストを作成
    - API通信を含むテストを実装
    - _要件: 全要件_
  
  - [ ] 14.3 E2Eテストの作成
    - 主要ユーザーフローのE2Eテストを作成
    - グループ作成から関係図表示までの一連の流れをテスト
    - _要件: 全要件_

- [ ] 15. 最終統合とデプロイ準備
  - [ ] 15.1 フロントエンドとバックエンドの統合
    - 本番環境用の設定を追加
    - 環境変数とビルド設定を最適化
    - _要件: 6.1, 6.2_
  
  - [ ] 15.2 パフォーマンス最適化
    - 大量データ処理時のパフォーマンス改善
    - 関係図描画の最適化を実装
    - _要件: 5.5, 6.4_
  
  - [ ] 15.3 最終テストとバグ修正
    - 全機能の動作確認とバグ修正
    - ユーザビリティの改善
    - _要件: 全要件_